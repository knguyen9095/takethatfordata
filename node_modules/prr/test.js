const test = require('tap').test
    , prr  = require('./')

test('test prr(o, key, value) form', function (t) ***REMOVED***
  t.plan(2)

  var o = ***REMOVED******REMOVED***
  prr(o, 'foo', 'bar')
  t.equal(o.foo, 'bar', 'correct value')
  t.deepEqual(
      Object.getOwnPropertyDescriptor(o, 'foo')
    , ***REMOVED***
          enumerable   : false
        , configurable : false
        , writable     : false
        , value        : 'bar'
      ***REMOVED***
    , 'correct property descriptor'
  )
  t.end()
***REMOVED***)

test('test prr(o, ***REMOVED*** key: value ***REMOVED***) form', function (t) ***REMOVED***
  t.plan(2)

  var o = ***REMOVED******REMOVED***
  prr(o, ***REMOVED*** foo: 'bar' ***REMOVED***)

  t.equal(o.foo, 'bar', 'correct value')
  t.deepEqual(
      Object.getOwnPropertyDescriptor(o, 'foo')
    , ***REMOVED***
          enumerable   : false
        , configurable : false
        , writable     : false
        , value        : 'bar'
      ***REMOVED***
    , 'correct property descriptor'
  )
  t.end()
***REMOVED***)

test('test multiple key:value pairs', function (t) ***REMOVED***
  var o = ***REMOVED*** foo: 'bar' ***REMOVED***

  prr(o, ***REMOVED*** one: 'ONE', two: 'TWO', obj: ***REMOVED*** o: 'o' ***REMOVED******REMOVED***)

  t.deepEqual(o, ***REMOVED*** foo: 'bar' ***REMOVED***, 'properties are not enumerable')
  t.equal(o.one, 'ONE', 'correctly set property')
  t.equal(o.two, 'TWO', 'correctly set property')
  t.deepEqual(o.obj, ***REMOVED*** o: 'o' ***REMOVED***, 'correctly set property')

  ;[ 'one', 'two', 'obj' ].forEach(function (p) ***REMOVED***
    t.deepEqual(
        Object.getOwnPropertyDescriptor(o, p)
      , ***REMOVED***
            enumerable   : false
          , configurable : false
          , writable     : false
          , value        : p == 'obj' ? ***REMOVED*** o: 'o' ***REMOVED*** : p.toUpperCase()
        ***REMOVED***
      , 'correct property descriptor'
    )
  ***REMOVED***)

  t.end()
***REMOVED***)

test('test descriptor options', function (t) ***REMOVED***
  var o = ***REMOVED******REMOVED***

  prr(o, 'foo', 'bar', ***REMOVED***
      enumerable   : true
    , configurable : false
  ***REMOVED***)
  t.equal(o.foo, 'bar', 'correct value')
  t.deepEqual(
      Object.getOwnPropertyDescriptor(o, 'foo')
    , ***REMOVED***
          enumerable   : true
        , configurable : false
        , writable     : false
        , value        : 'bar'
      ***REMOVED***
    , 'correct property descriptor'
  )

  prr(o, 'foo2', 'bar2', ***REMOVED***
      enumerable   : true
    , configurable : true
    , writable     : false
  ***REMOVED***)
  t.equal(o.foo2, 'bar2', 'correct value')
  t.deepEqual(
      Object.getOwnPropertyDescriptor(o, 'foo2')
    , ***REMOVED***
          enumerable   : true
        , configurable : true
        , writable     : false
        , value        : 'bar2'
      ***REMOVED***
    , 'correct property descriptor'
  )

  prr(o, 'foo3', 'bar3', ***REMOVED***
      enumerable   : true
    , configurable : true
    , writable     : true
  ***REMOVED***)
  t.equal(o.foo3, 'bar3', 'correct value')
  t.deepEqual(
      Object.getOwnPropertyDescriptor(o, 'foo3')
    , ***REMOVED***
          enumerable   : true
        , configurable : true
        , writable     : true
        , value        : 'bar3'
      ***REMOVED***
    , 'correct property descriptor'
  )

  t.end()
***REMOVED***)


test('test descriptor options, string form', function (t) ***REMOVED***
  var o = ***REMOVED******REMOVED***

  prr(o, 'foo', 'bar', 'e')
  t.equal(o.foo, 'bar', 'correct value')
  t.deepEqual(
      Object.getOwnPropertyDescriptor(o, 'foo')
    , ***REMOVED***
          enumerable   : true
        , configurable : false
        , writable     : false
        , value        : 'bar'
      ***REMOVED***
    , 'correct property descriptor'
  )

  prr(o, 'foo2', 'bar2', 'ec')
  t.equal(o.foo2, 'bar2', 'correct value')
  t.deepEqual(
      Object.getOwnPropertyDescriptor(o, 'foo2')
    , ***REMOVED***
          enumerable   : true
        , configurable : true
        , writable     : false
        , value        : 'bar2'
      ***REMOVED***
    , 'correct property descriptor'
  )

  prr(o, 'foo3', 'bar3', 'ecw')
  t.equal(o.foo3, 'bar3', 'correct value')
  t.deepEqual(
      Object.getOwnPropertyDescriptor(o, 'foo3')
    , ***REMOVED***
          enumerable   : true
        , configurable : true
        , writable     : true
        , value        : 'bar3'
      ***REMOVED***
    , 'correct property descriptor'
  )

  t.end()
***REMOVED***)
