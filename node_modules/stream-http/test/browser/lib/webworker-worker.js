var Buffer = require('buffer').Buffer

var http = require('../../..')

module.exports = function (self) ***REMOVED***
	self.addEventListener('message', function (ev) ***REMOVED***
		var url = ev.data
		http.get(url, function (res) ***REMOVED***
			var buffers = []

			res.on('end', function () ***REMOVED***
				self.postMessage(Buffer.concat(buffers).buffer)
			***REMOVED***)

			res.on('data', function (data) ***REMOVED***
				buffers.push(data)
			***REMOVED***)
		***REMOVED***)
	***REMOVED***)
***REMOVED***