var traverse = require('../');
var test = require('tape');

test('negative update test', function (t) ***REMOVED***
    var obj = [ 5, 6, -3, [ 7, 8, -2, 1 ], ***REMOVED*** f : 10, g : -13 ***REMOVED*** ];
    var fixed = traverse.map(obj, function (x) ***REMOVED***
        if (x < 0) this.update(x + 128);
    ***REMOVED***);
    
    t.same(fixed,
        [ 5, 6, 125, [ 7, 8, 126, 1 ], ***REMOVED*** f: 10, g: 115 ***REMOVED*** ],
        'Negative values += 128'
    );
    
    t.same(obj,
        [ 5, 6, -3, [ 7, 8, -2, 1 ], ***REMOVED*** f: 10, g: -13 ***REMOVED*** ],
        'Original references not modified'
    );
    
    t.end();
***REMOVED***);
