var test = require('tape');
var traverse = require('../');

test('stringify', function (t) ***REMOVED***
    var obj = [ 5, 6, -3, [ 7, 8, -2, 1 ], ***REMOVED*** f : 10, g : -13 ***REMOVED*** ];
    
    var s = '';
    traverse(obj).forEach(function (node) ***REMOVED***
        if (Array.isArray(node)) ***REMOVED***
            this.before(function () ***REMOVED*** s += '[' ***REMOVED***);
            this.post(function (child) ***REMOVED***
                if (!child.isLast) s += ',';
            ***REMOVED***);
            this.after(function () ***REMOVED*** s += ']' ***REMOVED***);
        ***REMOVED***
        else if (typeof node == 'object') ***REMOVED***
            this.before(function () ***REMOVED*** s += '***REMOVED***' ***REMOVED***);
            this.pre(function (x, key) ***REMOVED***
                s += '"' + key + '"' + ':';
            ***REMOVED***);
            this.post(function (child) ***REMOVED***
                if (!child.isLast) s += ',';
            ***REMOVED***);
            this.after(function () ***REMOVED*** s += '***REMOVED***' ***REMOVED***);
        ***REMOVED***
        else if (typeof node == 'function') ***REMOVED***
            s += 'null';
        ***REMOVED***
        else ***REMOVED***
            s += node.toString();
        ***REMOVED***
    ***REMOVED***);
    
    t.equal(s, JSON.stringify(obj));
    t.end();
***REMOVED***);
