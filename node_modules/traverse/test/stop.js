var test = require('tape');
var traverse = require('../');

test('stop', function (t) ***REMOVED***
    var visits = 0;
    traverse('abcdefghij'.split('')).forEach(function (node) ***REMOVED***
        if (typeof node === 'string') ***REMOVED***
            visits ++;
            if (node === 'e') this.stop()
        ***REMOVED***
    ***REMOVED***);
    
    t.equal(visits, 5);
    t.end();
***REMOVED***);

test('stopMap', function (t) ***REMOVED***
    var s = traverse('abcdefghij'.split('')).map(function (node) ***REMOVED***
        if (typeof node === 'string') ***REMOVED***
            if (node === 'e') this.stop()
            return node.toUpperCase();
        ***REMOVED***
    ***REMOVED***).join('');
    
    t.equal(s, 'ABCDEfghij');
    t.end();
***REMOVED***);

test('stopReduce', function (t) ***REMOVED***
    var obj = ***REMOVED***
        a : [ 4, 5 ],
        b : [ 6, [ 7, 8, 9 ] ]
    ***REMOVED***;
    var xs = traverse(obj).reduce(function (acc, node) ***REMOVED***
        if (this.isLeaf) ***REMOVED***
            if (node === 7) this.stop();
            else acc.push(node)
        ***REMOVED***
        return acc;
    ***REMOVED***, []);
    
    t.same(xs, [ 4, 5, 6 ]);
    t.end();
***REMOVED***);
