'use strict';
const path = require('path');
const locatePath = require('locate-path');

module.exports = (filename, opts) => ***REMOVED***
	opts = opts || ***REMOVED******REMOVED***;

	const startDir = path.resolve(opts.cwd || '');
	const root = path.parse(startDir).root;

	const filenames = [].concat(filename);

	return new Promise(resolve => ***REMOVED***
		(function find(dir) ***REMOVED***
			locatePath(filenames, ***REMOVED***cwd: dir***REMOVED***).then(file => ***REMOVED***
				if (file) ***REMOVED***
					resolve(path.join(dir, file));
				***REMOVED*** else if (dir === root) ***REMOVED***
					resolve(null);
				***REMOVED*** else ***REMOVED***
					find(path.dirname(dir));
				***REMOVED***
			***REMOVED***);
		***REMOVED***)(startDir);
	***REMOVED***);
***REMOVED***;

module.exports.sync = (filename, opts) => ***REMOVED***
	opts = opts || ***REMOVED******REMOVED***;

	let dir = path.resolve(opts.cwd || '');
	const root = path.parse(dir).root;

	const filenames = [].concat(filename);

	// eslint-disable-next-line no-constant-condition
	while (true) ***REMOVED***
		const file = locatePath.sync(filenames, ***REMOVED***cwd: dir***REMOVED***);

		if (file) ***REMOVED***
			return path.join(dir, file);
		***REMOVED*** else if (dir === root) ***REMOVED***
			return null;
		***REMOVED***

		dir = path.dirname(dir);
	***REMOVED***
***REMOVED***;
