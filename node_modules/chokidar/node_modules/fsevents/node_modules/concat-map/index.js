module.exports = function (xs, fn) ***REMOVED***
    var res = [];
    for (var i = 0; i < xs.length; i++) ***REMOVED***
        var x = fn(xs[i], i);
        if (isArray(x)) res.push.apply(res, x);
        else res.push(x);
    ***REMOVED***
    return res;
***REMOVED***;

var isArray = Array.isArray || function (xs) ***REMOVED***
    return Object.prototype.toString.call(xs) === '[object Array]';
***REMOVED***;
