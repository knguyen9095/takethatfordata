/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/
module.exports = function getInnerRequest(resolver, request) ***REMOVED***
	if(typeof request.__innerRequest === "string" &&
		request.__innerRequest_request === request.request &&
		request.__innerRequest_relativePath === request.relativePath)
		return request.__innerRequest;
	var innerRequest;
	if(request.request) ***REMOVED***
		innerRequest = request.request;
		if(/^\.\.?\//.test(innerRequest) && request.relativePath) ***REMOVED***
			innerRequest = resolver.join(request.relativePath, innerRequest);
		***REMOVED***
	***REMOVED*** else ***REMOVED***
		innerRequest = request.relativePath;
	***REMOVED***
	request.__innerRequest_request = request.request;
	request.__innerRequest_relativePath = request.relativePath;
	return request.__innerRequest = innerRequest;
***REMOVED***;
