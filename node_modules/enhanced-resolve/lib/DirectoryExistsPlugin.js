/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/
function DirectoryExistsPlugin(source, target) ***REMOVED***
	this.source = source;
	this.target = target;
***REMOVED***
module.exports = DirectoryExistsPlugin;

DirectoryExistsPlugin.prototype.apply = function(resolver) ***REMOVED***
	var target = this.target;
	resolver.plugin(this.source, function(request, callback) ***REMOVED***
		var fs = this.fileSystem;
		var directory = request.path;
		fs.stat(directory, function(err, stat) ***REMOVED***
			if(err || !stat) ***REMOVED***
				if(callback.missing) callback.missing.push(directory);
				if(callback.log) callback.log(directory + " doesn't exist");
				return callback();
			***REMOVED***
			if(!stat.isDirectory()) ***REMOVED***
				if(callback.missing) callback.missing.push(directory);
				if(callback.log) callback.log(directory + " is not a directory");
				return callback();
			***REMOVED***
			this.doResolve(target, request, "existing directory", callback);
		***REMOVED***.bind(this));
	***REMOVED***);
***REMOVED***;
