var test = require('tape');
var vm = require('../');

test('vmRunInNewContext', function (t) ***REMOVED***
    t.plan(6);
    
    t.equal(vm.runInNewContext('a + 5', ***REMOVED*** a : 100 ***REMOVED***), 105);
    
    (function () ***REMOVED***
        var vars = ***REMOVED*** x : 10 ***REMOVED***;
        t.equal(vm.runInNewContext('x++', vars), 10);
        t.equal(vars.x, 11);
    ***REMOVED***)();
    
    (function () ***REMOVED***
        var vars = ***REMOVED*** x : 10 ***REMOVED***;
        t.equal(vm.runInNewContext('var y = 3; y + x++', vars), 13);
        t.equal(vars.x, 11);
        t.equal(vars.y, 3);
    ***REMOVED***)();
    
    t.end();
***REMOVED***);

test('vmRunInContext', function (t) ***REMOVED***
    t.plan(2);

    var context = vm.createContext(***REMOVED*** foo: 1 ***REMOVED***);

    vm.runInContext('var x = 1', context);
    t.deepEqual(context, ***REMOVED*** foo: 1, x: 1 ***REMOVED***);

    vm.runInContext('var y = 1', context);
    t.deepEqual(context, ***REMOVED*** foo: 1, x: 1, y: 1 ***REMOVED***);
***REMOVED***);
