'use strict';

function preserveCamelCase(str) ***REMOVED***
	var isLastCharLower = false;

	for (var i = 0; i < str.length; i++) ***REMOVED***
		var c = str.charAt(i);

		if (isLastCharLower && (/[a-zA-Z]/).test(c) && c.toUpperCase() === c) ***REMOVED***
			str = str.substr(0, i) + '-' + str.substr(i);
			isLastCharLower = false;
			i++;
		***REMOVED*** else ***REMOVED***
			isLastCharLower = (c.toLowerCase() === c);
		***REMOVED***
	***REMOVED***

	return str;
***REMOVED***

module.exports = function () ***REMOVED***
	var str = [].map.call(arguments, function (str) ***REMOVED***
		return str.trim();
	***REMOVED***).filter(function (str) ***REMOVED***
		return str.length;
	***REMOVED***).join('-');

	if (!str.length) ***REMOVED***
		return '';
	***REMOVED***

	if (str.length === 1) ***REMOVED***
		return str;
	***REMOVED***

	if (!(/[_.\- ]+/).test(str)) ***REMOVED***
		if (str === str.toUpperCase()) ***REMOVED***
			return str.toLowerCase();
		***REMOVED***

		if (str[0] !== str[0].toLowerCase()) ***REMOVED***
			return str[0].toLowerCase() + str.slice(1);
		***REMOVED***

		return str;
	***REMOVED***

	str = preserveCamelCase(str);

	return str
	.replace(/^[_.\- ]+/, '')
	.toLowerCase()
	.replace(/[_.\- ]+(\w|$)/g, function (m, p1) ***REMOVED***
		return p1.toUpperCase();
	***REMOVED***);
***REMOVED***;
