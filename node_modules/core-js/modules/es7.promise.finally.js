// https://github.com/tc39/proposal-promise-finally
'use strict';
var $export = require('./_export');
var core = require('./_core');
var global = require('./_global');
var speciesConstructor = require('./_species-constructor');
var promiseResolve = require('./_promise-resolve');

$export($export.P + $export.R, 'Promise', ***REMOVED*** 'finally': function (onFinally) ***REMOVED***
  var C = speciesConstructor(this, core.Promise || global.Promise);
  var isFunction = typeof onFinally == 'function';
  return this.then(
    isFunction ? function (x) ***REMOVED***
      return promiseResolve(C, onFinally()).then(function () ***REMOVED*** return x; ***REMOVED***);
    ***REMOVED*** : onFinally,
    isFunction ? function (e) ***REMOVED***
      return promiseResolve(C, onFinally()).then(function () ***REMOVED*** throw e; ***REMOVED***);
    ***REMOVED*** : onFinally
  );
***REMOVED*** ***REMOVED***);
