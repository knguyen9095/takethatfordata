var global = require('./_global');
var hide = require('./_hide');
var has = require('./_has');
var SRC = require('./_uid')('src');
var TO_STRING = 'toString';
var $toString = Function[TO_STRING];
var TPL = ('' + $toString).split(TO_STRING);

require('./_core').inspectSource = function (it) ***REMOVED***
  return $toString.call(it);
***REMOVED***;

(module.exports = function (O, key, val, safe) ***REMOVED***
  var isFunction = typeof val == 'function';
  if (isFunction) has(val, 'name') || hide(val, 'name', key);
  if (O[key] === val) return;
  if (isFunction) has(val, SRC) || hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key)));
  if (O === global) ***REMOVED***
    O[key] = val;
  ***REMOVED*** else if (!safe) ***REMOVED***
    delete O[key];
    hide(O, key, val);
  ***REMOVED*** else if (O[key]) ***REMOVED***
    O[key] = val;
  ***REMOVED*** else ***REMOVED***
    hide(O, key, val);
  ***REMOVED***
// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative
***REMOVED***)(Function.prototype, TO_STRING, function toString() ***REMOVED***
  return typeof this == 'function' && this[SRC] || $toString.call(this);
***REMOVED***);
