'use strict';
const path = require('path');
const loadJsonFile = require('load-json-file');
const pathType = require('path-type');

module.exports = (fp, opts) => ***REMOVED***
	if (typeof fp !== 'string') ***REMOVED***
		opts = fp;
		fp = '.';
	***REMOVED***

	opts = opts || ***REMOVED******REMOVED***;

	return pathType.dir(fp)
		.then(isDir => ***REMOVED***
			if (isDir) ***REMOVED***
				fp = path.join(fp, 'package.json');
			***REMOVED***

			return loadJsonFile(fp);
		***REMOVED***)
		.then(x => ***REMOVED***
			if (opts.normalize !== false) ***REMOVED***
				require('normalize-package-data')(x);
			***REMOVED***

			return x;
		***REMOVED***);
***REMOVED***;

module.exports.sync = (fp, opts) => ***REMOVED***
	if (typeof fp !== 'string') ***REMOVED***
		opts = fp;
		fp = '.';
	***REMOVED***

	opts = opts || ***REMOVED******REMOVED***;
	fp = pathType.dirSync(fp) ? path.join(fp, 'package.json') : fp;

	const x = loadJsonFile.sync(fp);

	if (opts.normalize !== false) ***REMOVED***
		require('normalize-package-data')(x);
	***REMOVED***

	return x;
***REMOVED***;
