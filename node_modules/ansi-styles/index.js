'use strict';
const colorConvert = require('color-convert');

const wrapAnsi16 = (fn, offset) => function () ***REMOVED***
	const code = fn.apply(colorConvert, arguments);
	return `\u001B[$***REMOVED***code + offset***REMOVED***m`;
***REMOVED***;

const wrapAnsi256 = (fn, offset) => function () ***REMOVED***
	const code = fn.apply(colorConvert, arguments);
	return `\u001B[$***REMOVED***38 + offset***REMOVED***;5;$***REMOVED***code***REMOVED***m`;
***REMOVED***;

const wrapAnsi16m = (fn, offset) => function () ***REMOVED***
	const rgb = fn.apply(colorConvert, arguments);
	return `\u001B[$***REMOVED***38 + offset***REMOVED***;2;$***REMOVED***rgb[0]***REMOVED***;$***REMOVED***rgb[1]***REMOVED***;$***REMOVED***rgb[2]***REMOVED***m`;
***REMOVED***;

function assembleStyles() ***REMOVED***
	const codes = new Map();
	const styles = ***REMOVED***
		modifier: ***REMOVED***
			reset: [0, 0],
			// 21 isn't widely supported and 22 does the same thing
			bold: [1, 22],
			dim: [2, 22],
			italic: [3, 23],
			underline: [4, 24],
			inverse: [7, 27],
			hidden: [8, 28],
			strikethrough: [9, 29]
		***REMOVED***,
		color: ***REMOVED***
			black: [30, 39],
			red: [31, 39],
			green: [32, 39],
			yellow: [33, 39],
			blue: [34, 39],
			magenta: [35, 39],
			cyan: [36, 39],
			white: [37, 39],
			gray: [90, 39],

			// Bright color
			redBright: [91, 39],
			greenBright: [92, 39],
			yellowBright: [93, 39],
			blueBright: [94, 39],
			magentaBright: [95, 39],
			cyanBright: [96, 39],
			whiteBright: [97, 39]
		***REMOVED***,
		bgColor: ***REMOVED***
			bgBlack: [40, 49],
			bgRed: [41, 49],
			bgGreen: [42, 49],
			bgYellow: [43, 49],
			bgBlue: [44, 49],
			bgMagenta: [45, 49],
			bgCyan: [46, 49],
			bgWhite: [47, 49],

			// Bright color
			bgBlackBright: [100, 49],
			bgRedBright: [101, 49],
			bgGreenBright: [102, 49],
			bgYellowBright: [103, 49],
			bgBlueBright: [104, 49],
			bgMagentaBright: [105, 49],
			bgCyanBright: [106, 49],
			bgWhiteBright: [107, 49]
		***REMOVED***
	***REMOVED***;

	// Fix humans
	styles.color.grey = styles.color.gray;

	for (const groupName of Object.keys(styles)) ***REMOVED***
		const group = styles[groupName];

		for (const styleName of Object.keys(group)) ***REMOVED***
			const style = group[styleName];

			styles[styleName] = ***REMOVED***
				open: `\u001B[$***REMOVED***style[0]***REMOVED***m`,
				close: `\u001B[$***REMOVED***style[1]***REMOVED***m`
			***REMOVED***;

			group[styleName] = styles[styleName];

			codes.set(style[0], style[1]);
		***REMOVED***

		Object.defineProperty(styles, groupName, ***REMOVED***
			value: group,
			enumerable: false
		***REMOVED***);

		Object.defineProperty(styles, 'codes', ***REMOVED***
			value: codes,
			enumerable: false
		***REMOVED***);
	***REMOVED***

	const rgb2rgb = (r, g, b) => [r, g, b];

	styles.color.close = '\u001B[39m';
	styles.bgColor.close = '\u001B[49m';

	styles.color.ansi = ***REMOVED******REMOVED***;
	styles.color.ansi256 = ***REMOVED******REMOVED***;
	styles.color.ansi16m = ***REMOVED***
		rgb: wrapAnsi16m(rgb2rgb, 0)
	***REMOVED***;

	styles.bgColor.ansi = ***REMOVED******REMOVED***;
	styles.bgColor.ansi256 = ***REMOVED******REMOVED***;
	styles.bgColor.ansi16m = ***REMOVED***
		rgb: wrapAnsi16m(rgb2rgb, 10)
	***REMOVED***;

	for (const key of Object.keys(colorConvert)) ***REMOVED***
		if (typeof colorConvert[key] !== 'object') ***REMOVED***
			continue;
		***REMOVED***

		const suite = colorConvert[key];

		if ('ansi16' in suite) ***REMOVED***
			styles.color.ansi[key] = wrapAnsi16(suite.ansi16, 0);
			styles.bgColor.ansi[key] = wrapAnsi16(suite.ansi16, 10);
		***REMOVED***

		if ('ansi256' in suite) ***REMOVED***
			styles.color.ansi256[key] = wrapAnsi256(suite.ansi256, 0);
			styles.bgColor.ansi256[key] = wrapAnsi256(suite.ansi256, 10);
		***REMOVED***

		if ('rgb' in suite) ***REMOVED***
			styles.color.ansi16m[key] = wrapAnsi16m(suite.rgb, 0);
			styles.bgColor.ansi16m[key] = wrapAnsi16m(suite.rgb, 10);
		***REMOVED***
	***REMOVED***

	return styles;
***REMOVED***

// Make the export immutable
Object.defineProperty(module, 'exports', ***REMOVED***
	enumerable: true,
	get: assembleStyles
***REMOVED***);
