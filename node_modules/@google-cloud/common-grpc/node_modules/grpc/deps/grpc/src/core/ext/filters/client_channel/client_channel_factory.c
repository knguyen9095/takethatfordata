/*
 *
 * Copyright 2015 gRPC authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */

#include "src/core/ext/filters/client_channel/client_channel_factory.h"
#include "src/core/lib/channel/channel_args.h"

void grpc_client_channel_factory_ref(grpc_client_channel_factory* factory) ***REMOVED***
  factory->vtable->ref(factory);
***REMOVED***

void grpc_client_channel_factory_unref(grpc_exec_ctx* exec_ctx,
                                       grpc_client_channel_factory* factory) ***REMOVED***
  factory->vtable->unref(exec_ctx, factory);
***REMOVED***

grpc_subchannel* grpc_client_channel_factory_create_subchannel(
    grpc_exec_ctx* exec_ctx, grpc_client_channel_factory* factory,
    const grpc_subchannel_args* args) ***REMOVED***
  return factory->vtable->create_subchannel(exec_ctx, factory, args);
***REMOVED***

grpc_channel* grpc_client_channel_factory_create_channel(
    grpc_exec_ctx* exec_ctx, grpc_client_channel_factory* factory,
    const char* target, grpc_client_channel_type type,
    const grpc_channel_args* args) ***REMOVED***
  return factory->vtable->create_client_channel(exec_ctx, factory, target, type,
                                                args);
***REMOVED***

static void* factory_arg_copy(void* factory) ***REMOVED***
  grpc_client_channel_factory_ref((grpc_client_channel_factory*)factory);
  return factory;
***REMOVED***

static void factory_arg_destroy(grpc_exec_ctx* exec_ctx, void* factory) ***REMOVED***
  grpc_client_channel_factory_unref(exec_ctx,
                                    (grpc_client_channel_factory*)factory);
***REMOVED***

static int factory_arg_cmp(void* factory1, void* factory2) ***REMOVED***
  if (factory1 < factory2) return -1;
  if (factory1 > factory2) return 1;
  return 0;
***REMOVED***

static const grpc_arg_pointer_vtable factory_arg_vtable = ***REMOVED***
    factory_arg_copy, factory_arg_destroy, factory_arg_cmp***REMOVED***;

grpc_arg grpc_client_channel_factory_create_channel_arg(
    grpc_client_channel_factory* factory) ***REMOVED***
  return grpc_channel_arg_pointer_create((char*)GRPC_ARG_CLIENT_CHANNEL_FACTORY,
                                         factory, &factory_arg_vtable);
***REMOVED***
