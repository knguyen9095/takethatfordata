'use strict';

module.exports = function defFunc(ajv) ***REMOVED***
  defFunc.definition = ***REMOVED***
    type: 'array',
    compile: function(keys, parentSchema, it) ***REMOVED***
      var equal = it.util.equal;
      return function(data) ***REMOVED***
        if (data.length > 1) ***REMOVED***
          for (var k=0; k < keys.length; k++) ***REMOVED***
            var key = keys[k];
            for (var i = data.length; i--;) ***REMOVED***
              if (typeof data[i] != 'object') continue;
              for (var j = i; j--;) ***REMOVED***
                if (typeof data[j] == 'object' && equal(data[i][key], data[j][key]))
                  return false;
              ***REMOVED***
            ***REMOVED***
          ***REMOVED***
        ***REMOVED***
        return true;
      ***REMOVED***;
    ***REMOVED***,
    metaSchema: ***REMOVED***
      type: 'array',
      items: ***REMOVED***type: 'string'***REMOVED***
    ***REMOVED***
  ***REMOVED***;

  ajv.addKeyword('uniqueItemProperties', defFunc.definition);
  return ajv;
***REMOVED***;
