var test = require("tape")
var extend = require("./")
var mutableExtend = require("./mutable")

test("merge", function(assert) ***REMOVED***
    var a = ***REMOVED*** a: "foo" ***REMOVED***
    var b = ***REMOVED*** b: "bar" ***REMOVED***

    assert.deepEqual(extend(a, b), ***REMOVED*** a: "foo", b: "bar" ***REMOVED***)
    assert.end()
***REMOVED***)

test("replace", function(assert) ***REMOVED***
    var a = ***REMOVED*** a: "foo" ***REMOVED***
    var b = ***REMOVED*** a: "bar" ***REMOVED***

    assert.deepEqual(extend(a, b), ***REMOVED*** a: "bar" ***REMOVED***)
    assert.end()
***REMOVED***)

test("undefined", function(assert) ***REMOVED***
    var a = ***REMOVED*** a: undefined ***REMOVED***
    var b = ***REMOVED*** b: "foo" ***REMOVED***

    assert.deepEqual(extend(a, b), ***REMOVED*** a: undefined, b: "foo" ***REMOVED***)
    assert.deepEqual(extend(b, a), ***REMOVED*** a: undefined, b: "foo" ***REMOVED***)
    assert.end()
***REMOVED***)

test("handle 0", function(assert) ***REMOVED***
    var a = ***REMOVED*** a: "default" ***REMOVED***
    var b = ***REMOVED*** a: 0 ***REMOVED***

    assert.deepEqual(extend(a, b), ***REMOVED*** a: 0 ***REMOVED***)
    assert.deepEqual(extend(b, a), ***REMOVED*** a: "default" ***REMOVED***)
    assert.end()
***REMOVED***)

test("is immutable", function (assert) ***REMOVED***
    var record = ***REMOVED******REMOVED***

    extend(record, ***REMOVED*** foo: "bar" ***REMOVED***)
    assert.equal(record.foo, undefined)
    assert.end()
***REMOVED***)

test("null as argument", function (assert) ***REMOVED***
    var a = ***REMOVED*** foo: "bar" ***REMOVED***
    var b = null
    var c = void 0

    assert.deepEqual(extend(b, a, c), ***REMOVED*** foo: "bar" ***REMOVED***)
    assert.end()
***REMOVED***)

test("mutable", function (assert) ***REMOVED***
    var a = ***REMOVED*** foo: "bar" ***REMOVED***

    mutableExtend(a, ***REMOVED*** bar: "baz" ***REMOVED***)

    assert.equal(a.bar, "baz")
    assert.end()
***REMOVED***)

test("null prototype", function(assert) ***REMOVED***
    var a = ***REMOVED*** a: "foo" ***REMOVED***
    var b = Object.create(null)
    b.b = "bar";

    assert.deepEqual(extend(a, b), ***REMOVED*** a: "foo", b: "bar" ***REMOVED***)
    assert.end()
***REMOVED***)

test("null prototype mutable", function (assert) ***REMOVED***
    var a = ***REMOVED*** foo: "bar" ***REMOVED***
    var b = Object.create(null)
    b.bar = "baz";

    mutableExtend(a, b)

    assert.equal(a.bar, "baz")
    assert.end()
***REMOVED***)
