'use strict';

var ContextTraversal = require('power-assert-context-traversal');
var inherits = require('util').inherits;
var slice = Array.prototype.slice;

function LegacyContextTraversal (powerAssertContext) ***REMOVED***
    ContextTraversal.call(this, powerAssertContext);
***REMOVED***
inherits(LegacyContextTraversal, ContextTraversal);

LegacyContextTraversal.prototype.setWritable = function (writer) ***REMOVED***
    this.writer = writer;
***REMOVED***;

LegacyContextTraversal.prototype.on = function () ***REMOVED***
    var args = slice.apply(arguments);
    if (args[0] === 'render') ***REMOVED***
        args[0] = 'end';
    ***REMOVED***
    ContextTraversal.prototype.on.apply(this, args);
***REMOVED***;

LegacyContextTraversal.prototype.emit = function () ***REMOVED***
    var args = slice.apply(arguments);
    if (args[0] === 'end') ***REMOVED***
        args[1] = this.writer;
    ***REMOVED***
    ContextTraversal.prototype.emit.apply(this, args);
***REMOVED***;

module.exports = LegacyContextTraversal;
