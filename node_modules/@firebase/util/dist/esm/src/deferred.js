/**
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Deferred = /** @class */ (function () ***REMOVED***
    function Deferred() ***REMOVED***
        var _this = this;
        this.promise = new Promise(function (resolve, reject) ***REMOVED***
            _this.resolve = resolve;
            _this.reject = reject;
        ***REMOVED***);
    ***REMOVED***
    /**
     * Our API internals are not promiseified and cannot because our callback APIs have subtle expectations around
     * invoking promises inline, which Promises are forbidden to do. This method accepts an optional node-style callback
     * and returns a node-style callback which will resolve or reject the Deferred's promise.
     * @param ***REMOVED***((?function(?(Error)): (?|undefined))| (?function(?(Error),?=): (?|undefined)))=***REMOVED*** callback
     * @return ***REMOVED***!function(?(Error), ?=)***REMOVED***
     */
    Deferred.prototype.wrapCallback = function (callback) ***REMOVED***
        var _this = this;
        return function (error, value) ***REMOVED***
            if (error) ***REMOVED***
                _this.reject(error);
            ***REMOVED***
            else ***REMOVED***
                _this.resolve(value);
            ***REMOVED***
            if (typeof callback === 'function') ***REMOVED***
                // Attaching noop handler just in case developer wasn't expecting
                // promises
                _this.promise.catch(function () ***REMOVED*** ***REMOVED***);
                // Some of our callbacks don't expect a value and our own tests
                // assert that the parameter length is 1
                if (callback.length === 1) ***REMOVED***
                    callback(error);
                ***REMOVED***
                else ***REMOVED***
                    callback(error, value);
                ***REMOVED***
            ***REMOVED***
        ***REMOVED***;
    ***REMOVED***;
    return Deferred;
***REMOVED***());
export ***REMOVED*** Deferred ***REMOVED***;

//# sourceMappingURL=deferred.js.map
