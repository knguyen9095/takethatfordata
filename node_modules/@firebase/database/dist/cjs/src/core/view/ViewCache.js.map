***REMOVED***"version":3,"sources":["../src/core/view/ViewCache.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;GAcG;;AAEH,qDAAoD;AACpD,yCAAwC;AAGxC;;;;;;GAMG;AACH;IACE;;;;OAIG;IACH,mBACmB,WAAsB,EACtB,YAAuB;QADvB,gBAAW,GAAX,WAAW,CAAW;QACtB,iBAAY,GAAZ,YAAY,CAAW;IACvC,CAAC;IAmBJ;;;;;OAKG;IACH,mCAAe,GAAf,UACE,SAAe,EACf,QAAiB,EACjB,QAAiB;QAEjB,MAAM,CAAC,IAAI,SAAS,CAClB,IAAI,qBAAS,CAAC,SAAS,EAAE,QAAQ,EAAE,QAAQ,CAAC,EAC5C,IAAI,CAAC,YAAY,CAClB,CAAC;IACJ,CAAC;IAED;;;;;OAKG;IACH,oCAAgB,GAAhB,UACE,UAAgB,EAChB,QAAiB,EACjB,QAAiB;QAEjB,MAAM,CAAC,IAAI,SAAS,CAClB,IAAI,CAAC,WAAW,EAChB,IAAI,qBAAS,CAAC,UAAU,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAC9C,CAAC;IACJ,CAAC;IAED;;OAEG;IACH,iCAAa,GAAb;QACE,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC;IAC1B,CAAC;IAED;;OAEG;IACH,wCAAoB,GAApB;QACE,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,kBAAkB,EAAE;YAC1C,CAAC,CAAC,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE;YAC5B,CAAC,CAAC,IAAI,CAAC;IACX,CAAC;IAED;;OAEG;IACH,kCAAc,GAAd;QACE,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC;IAC3B,CAAC;IAED;;OAEG;IACH,yCAAqB,GAArB;QACE,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,kBAAkB,EAAE;YAC3C,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE;YAC7B,CAAC,CAAC,IAAI,CAAC;IACX,CAAC;IAjFD;;;OAGG;IACI,eAAK,GAAG,IAAI,SAAS,CAC1B,IAAI,qBAAS,CACX,2BAAY,CAAC,UAAU;IACvB,qBAAqB,CAAC,KAAK;IAC3B,aAAa,CAAC,KAAK,CACpB,EACD,IAAI,qBAAS,CACX,2BAAY,CAAC,UAAU;IACvB,qBAAqB,CAAC,KAAK;IAC3B,aAAa,CAAC,KAAK,CACpB,CACF,CAAC;IAmEJ,gBAAC;CA7FD,AA6FC,IAAA;AA7FY,8BAAS","file":"ViewCache.js","sourcesContent":["/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport ***REMOVED*** ChildrenNode ***REMOVED*** from '../snap/ChildrenNode';\nimport ***REMOVED*** CacheNode ***REMOVED*** from './CacheNode';\nimport ***REMOVED*** Node ***REMOVED*** from '../snap/Node';\n\n/**\n * Stores the data we have cached for a view.\n *\n * serverSnap is the cached server data, eventSnap is the cached event data (server data plus any local writes).\n *\n * @constructor\n */\nexport class ViewCache ***REMOVED***\n  /**\n   *\n   * @param ***REMOVED***!CacheNode***REMOVED*** eventCache_\n   * @param ***REMOVED***!CacheNode***REMOVED*** serverCache_\n   */\n  constructor(\n    private readonly eventCache_: CacheNode,\n    private readonly serverCache_: CacheNode\n  ) ***REMOVED******REMOVED***\n\n  /**\n   * @const\n   * @type ***REMOVED***ViewCache***REMOVED***\n   */\n  static Empty = new ViewCache(\n    new CacheNode(\n      ChildrenNode.EMPTY_NODE,\n      /*fullyInitialized=*/ false,\n      /*filtered=*/ false\n    ),\n    new CacheNode(\n      ChildrenNode.EMPTY_NODE,\n      /*fullyInitialized=*/ false,\n      /*filtered=*/ false\n    )\n  );\n\n  /**\n   * @param ***REMOVED***!Node***REMOVED*** eventSnap\n   * @param ***REMOVED***boolean***REMOVED*** complete\n   * @param ***REMOVED***boolean***REMOVED*** filtered\n   * @return ***REMOVED***!ViewCache***REMOVED***\n   */\n  updateEventSnap(\n    eventSnap: Node,\n    complete: boolean,\n    filtered: boolean\n  ): ViewCache ***REMOVED***\n    return new ViewCache(\n      new CacheNode(eventSnap, complete, filtered),\n      this.serverCache_\n    );\n  ***REMOVED***\n\n  /**\n   * @param ***REMOVED***!Node***REMOVED*** serverSnap\n   * @param ***REMOVED***boolean***REMOVED*** complete\n   * @param ***REMOVED***boolean***REMOVED*** filtered\n   * @return ***REMOVED***!ViewCache***REMOVED***\n   */\n  updateServerSnap(\n    serverSnap: Node,\n    complete: boolean,\n    filtered: boolean\n  ): ViewCache ***REMOVED***\n    return new ViewCache(\n      this.eventCache_,\n      new CacheNode(serverSnap, complete, filtered)\n    );\n  ***REMOVED***\n\n  /**\n   * @return ***REMOVED***!CacheNode***REMOVED***\n   */\n  getEventCache(): CacheNode ***REMOVED***\n    return this.eventCache_;\n  ***REMOVED***\n\n  /**\n   * @return ***REMOVED***?Node***REMOVED***\n   */\n  getCompleteEventSnap(): Node | null ***REMOVED***\n    return this.eventCache_.isFullyInitialized()\n      ? this.eventCache_.getNode()\n      : null;\n  ***REMOVED***\n\n  /**\n   * @return ***REMOVED***!CacheNode***REMOVED***\n   */\n  getServerCache(): CacheNode ***REMOVED***\n    return this.serverCache_;\n  ***REMOVED***\n\n  /**\n   * @return ***REMOVED***?Node***REMOVED***\n   */\n  getCompleteServerSnap(): Node | null ***REMOVED***\n    return this.serverCache_.isFullyInitialized()\n      ? this.serverCache_.getNode()\n      : null;\n  ***REMOVED***\n***REMOVED***\n"]***REMOVED***