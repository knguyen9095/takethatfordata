'use strict';

var async = require('async');
var ended = require('is-stream-ended');

module.exports = function (array, stream, callback) ***REMOVED***
  var arr = [].slice.call(array);

  async.whilst(
    function () ***REMOVED***
      return !ended(stream) && arr.length > 0;
    ***REMOVED***,

    function (next) ***REMOVED***
      stream.push(arr.shift());
      setImmediate(next);
    ***REMOVED***,

    function () ***REMOVED***
      callback(ended(stream));
    ***REMOVED***);
***REMOVED***;
