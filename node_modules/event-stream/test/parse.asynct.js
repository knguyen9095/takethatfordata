var es = require('../')
  , it = require('it-is').style('colour')

exports ['es.parse() writes parsing errors with console.error'] = function (test) ***REMOVED***
  var parseStream = es.parse()
  var oldConsoleError = console.error
  console.error = function () ***REMOVED***
    console.error = oldConsoleError
    it(arguments.length > 0).ok()
    test.done()
  ***REMOVED***

  // bare word is not valid JSON
  parseStream.write('A')
***REMOVED***

exports ['es.parse(***REMOVED***error: true(thy)***REMOVED***) emits error events from parsing'] = function (test) ***REMOVED***
  var parseStream = es.parse(***REMOVED***error: 1***REMOVED***)
  var expectedError
  try ***REMOVED***
    JSON.parse('A')
  ***REMOVED*** catch(e) ***REMOVED***
    expectedError = e
  ***REMOVED***

  parseStream.on('error', function (e) ***REMOVED***
    it(e).deepEqual(expectedError)
    process.nextTick(function () ***REMOVED***
      test.done()
    ***REMOVED***)
  ***REMOVED***).write('A')
***REMOVED***
