/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/
"use strict";

class Semaphore ***REMOVED***
	constructor(available) ***REMOVED***
		this.available = available;
		this.waiters = [];
	***REMOVED***

	acquire(callback) ***REMOVED***
		if(this.available > 0) ***REMOVED***
			this.available--;
			callback();
		***REMOVED*** else ***REMOVED***
			this.waiters.push(callback);
		***REMOVED***
	***REMOVED***

	release() ***REMOVED***
		if(this.waiters.length > 0) ***REMOVED***
			const callback = this.waiters.pop();
			process.nextTick(callback);
		***REMOVED*** else ***REMOVED***
			this.available++;
		***REMOVED***
	***REMOVED***
***REMOVED***

module.exports = Semaphore;
