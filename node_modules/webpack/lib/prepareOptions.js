"use strict";

module.exports = function prepareOptions(options, argv) ***REMOVED***
	argv = argv || ***REMOVED******REMOVED***;

	options = handleExport(options);

	if(Array.isArray(options)) ***REMOVED***
		options = options.map(_options => handleFunction(_options, argv));
	***REMOVED*** else ***REMOVED***
		options = handleFunction(options, argv);
	***REMOVED***
	return options;
***REMOVED***;

function handleExport(options) ***REMOVED***
	const isES6DefaultExported = (
		typeof options === "object" && options !== null && typeof options.default !== "undefined"
	);
	options = isES6DefaultExported ? options.default : options;
	return options;
***REMOVED***

function handleFunction(options, argv) ***REMOVED***
	if(typeof options === "function") ***REMOVED***
		options = options(argv.env, argv);
	***REMOVED***
	return options;
***REMOVED***
