/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/
"use strict";

const CaseSensitiveModulesWarning = require("./CaseSensitiveModulesWarning");

class WarnCaseSensitiveModulesPlugin ***REMOVED***
	apply(compiler) ***REMOVED***
		compiler.plugin("compilation", compilation => ***REMOVED***
			compilation.plugin("seal", () => ***REMOVED***
				const moduleWithoutCase = Object.create(null);
				compilation.modules.forEach(module => ***REMOVED***
					const identifier = module.identifier().toLowerCase();
					if(moduleWithoutCase[identifier]) ***REMOVED***
						moduleWithoutCase[identifier].push(module);
					***REMOVED*** else ***REMOVED***
						moduleWithoutCase[identifier] = [module];
					***REMOVED***
				***REMOVED***);
				Object.keys(moduleWithoutCase).forEach(key => ***REMOVED***
					if(moduleWithoutCase[key].length > 1)
						compilation.warnings.push(new CaseSensitiveModulesWarning(moduleWithoutCase[key]));
				***REMOVED***);
			***REMOVED***);
		***REMOVED***);
	***REMOVED***
***REMOVED***

module.exports = WarnCaseSensitiveModulesPlugin;
