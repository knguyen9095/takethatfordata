/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/
"use strict";

const SingleEntryPlugin = require("./SingleEntryPlugin");
const MultiEntryPlugin = require("./MultiEntryPlugin");
const DynamicEntryPlugin = require("./DynamicEntryPlugin");

function itemToPlugin(context, item, name) ***REMOVED***
	if(Array.isArray(item)) ***REMOVED***
		return new MultiEntryPlugin(context, item, name);
	***REMOVED***
	return new SingleEntryPlugin(context, item, name);
***REMOVED***

module.exports = class EntryOptionPlugin ***REMOVED***
	apply(compiler) ***REMOVED***
		compiler.plugin("entry-option", (context, entry) => ***REMOVED***
			if(typeof entry === "string" || Array.isArray(entry)) ***REMOVED***
				compiler.apply(itemToPlugin(context, entry, "main"));
			***REMOVED*** else if(typeof entry === "object") ***REMOVED***
				Object.keys(entry).forEach(name => compiler.apply(itemToPlugin(context, entry[name], name)));
			***REMOVED*** else if(typeof entry === "function") ***REMOVED***
				compiler.apply(new DynamicEntryPlugin(context, entry));
			***REMOVED***
			return true;
		***REMOVED***);
	***REMOVED***
***REMOVED***;
