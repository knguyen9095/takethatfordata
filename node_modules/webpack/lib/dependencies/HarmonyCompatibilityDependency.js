/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/
"use strict";
const NullDependency = require("./NullDependency");

class HarmonyCompatibilityDependency extends NullDependency ***REMOVED***
	constructor(originModule) ***REMOVED***
		super();
		this.originModule = originModule;
	***REMOVED***

	get type() ***REMOVED***
		return "harmony export header";
	***REMOVED***
***REMOVED***

HarmonyCompatibilityDependency.Template = class HarmonyExportDependencyTemplate ***REMOVED***
	apply(dep, source) ***REMOVED***
		const usedExports = dep.originModule.usedExports;
		if(usedExports && !Array.isArray(usedExports)) ***REMOVED***
			const exportName = dep.originModule.exportsArgument || "exports";
			const content = `Object.defineProperty($***REMOVED***exportName***REMOVED***, "__esModule", ***REMOVED*** value: true ***REMOVED***);\n`;
			source.insert(-10, content);
		***REMOVED***
	***REMOVED***
***REMOVED***;

module.exports = HarmonyCompatibilityDependency;
