/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/
"use strict";

const util = require("util");

class ModuleReason ***REMOVED***
	constructor(module, dependency) ***REMOVED***
		this.module = module;
		this.dependency = dependency;
		this._chunks = null;
	***REMOVED***

	hasChunk(chunk) ***REMOVED***
		if(this._chunks) ***REMOVED***
			if(this._chunks.has(chunk))
				return true;
		***REMOVED*** else if(this.module._chunks.has(chunk))
			return true;
		return false;
	***REMOVED***

	rewriteChunks(oldChunk, newChunks) ***REMOVED***
		if(!this._chunks) ***REMOVED***
			if(!this.module._chunks.has(oldChunk))
				return;
			this._chunks = new Set(this.module._chunks);
		***REMOVED***
		if(this._chunks.has(oldChunk)) ***REMOVED***
			this._chunks.delete(oldChunk);
			for(let i = 0; i < newChunks.length; i++) ***REMOVED***
				this._chunks.add(newChunks[i]);
			***REMOVED***
		***REMOVED***
	***REMOVED***
***REMOVED***

Object.defineProperty(ModuleReason.prototype, "chunks", ***REMOVED***
	configurable: false,
	get: util.deprecate(function() ***REMOVED***
		return this._chunks ? Array.from(this._chunks) : null;
	***REMOVED***, "ModuleReason.chunks: Use ModuleReason.hasChunk/rewriteChunks instead"),
	set() ***REMOVED***
		throw new Error("Readonly. Use ModuleReason.rewriteChunks to modify chunks.");
	***REMOVED***
***REMOVED***);

module.exports = ModuleReason;
