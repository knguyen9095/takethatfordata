/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/
"use strict";

class MergeDuplicateChunksPlugin ***REMOVED***

	apply(compiler) ***REMOVED***
		compiler.plugin("compilation", (compilation) => ***REMOVED***
			compilation.plugin("optimize-chunks-basic", (chunks) => ***REMOVED***
				const map = Object.create(null);
				chunks.slice().forEach((chunk) => ***REMOVED***
					if(chunk.hasRuntime() || chunk.hasEntryModule()) return;
					const ident = chunk.getModulesIdent();
					const otherChunk = map[ident];
					if(otherChunk) ***REMOVED***
						if(otherChunk.integrate(chunk, "duplicate"))
							chunks.splice(chunks.indexOf(chunk), 1);
						return;
					***REMOVED***
					map[ident] = chunk;
				***REMOVED***);
			***REMOVED***);
		***REMOVED***);
	***REMOVED***
***REMOVED***
module.exports = MergeDuplicateChunksPlugin;
