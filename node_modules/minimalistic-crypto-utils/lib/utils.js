'use strict';

var utils = exports;

function toArray(msg, enc) ***REMOVED***
  if (Array.isArray(msg))
    return msg.slice();
  if (!msg)
    return [];
  var res = [];
  if (typeof msg !== 'string') ***REMOVED***
    for (var i = 0; i < msg.length; i++)
      res[i] = msg[i] | 0;
    return res;
  ***REMOVED***
  if (enc === 'hex') ***REMOVED***
    msg = msg.replace(/[^a-z0-9]+/ig, '');
    if (msg.length % 2 !== 0)
      msg = '0' + msg;
    for (var i = 0; i < msg.length; i += 2)
      res.push(parseInt(msg[i] + msg[i + 1], 16));
  ***REMOVED*** else ***REMOVED***
    for (var i = 0; i < msg.length; i++) ***REMOVED***
      var c = msg.charCodeAt(i);
      var hi = c >> 8;
      var lo = c & 0xff;
      if (hi)
        res.push(hi, lo);
      else
        res.push(lo);
    ***REMOVED***
  ***REMOVED***
  return res;
***REMOVED***
utils.toArray = toArray;

function zero2(word) ***REMOVED***
  if (word.length === 1)
    return '0' + word;
  else
    return word;
***REMOVED***
utils.zero2 = zero2;

function toHex(msg) ***REMOVED***
  var res = '';
  for (var i = 0; i < msg.length; i++)
    res += zero2(msg[i].toString(16));
  return res;
***REMOVED***
utils.toHex = toHex;

utils.encode = function encode(arr, enc) ***REMOVED***
  if (enc === 'hex')
    return toHex(arr);
  else
    return arr;
***REMOVED***;
