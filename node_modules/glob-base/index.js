/*!
 * glob-base <https://github.com/jonschlinkert/glob-base>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */

'use strict';

var path = require('path');
var parent = require('glob-parent');
var isGlob = require('is-glob');

module.exports = function globBase(pattern) ***REMOVED***
  if (typeof pattern !== 'string') ***REMOVED***
    throw new TypeError('glob-base expects a string.');
  ***REMOVED***

  var res = ***REMOVED******REMOVED***;
  res.base = parent(pattern);
  res.isGlob = isGlob(pattern);

  if (res.base !== '.') ***REMOVED***
    res.glob = pattern.substr(res.base.length);
    if (res.glob.charAt(0) === '/') ***REMOVED***
      res.glob = res.glob.substr(1);
    ***REMOVED***
  ***REMOVED*** else ***REMOVED***
    res.glob = pattern;
  ***REMOVED***

  if (!res.isGlob) ***REMOVED***
    res.base = dirname(pattern);
    res.glob = res.base !== '.'
      ? pattern.substr(res.base.length)
      : pattern;
  ***REMOVED***

  if (res.glob.substr(0, 2) === './') ***REMOVED***
    res.glob = res.glob.substr(2);
  ***REMOVED***
  if (res.glob.charAt(0) === '/') ***REMOVED***
    res.glob = res.glob.substr(1);
  ***REMOVED***
  return res;
***REMOVED***;

function dirname(glob) ***REMOVED***
  if (glob.slice(-1) === '/') return glob;
  return path.dirname(glob);
***REMOVED***
