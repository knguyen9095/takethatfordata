// Copyright 2014 Simon Lydell
// X11 (“MIT”) Licensed. (See LICENSE.)

void (function(root, factory) ***REMOVED***
  if (typeof define === "function" && define.amd) ***REMOVED***
    define(factory)
  ***REMOVED*** else if (typeof exports === "object") ***REMOVED***
    module.exports = factory()
  ***REMOVED*** else ***REMOVED***
    root.resolveUrl = factory()
  ***REMOVED***
***REMOVED***(this, function() ***REMOVED***

  function resolveUrl(/* ...urls */) ***REMOVED***
    var numUrls = arguments.length

    if (numUrls === 0) ***REMOVED***
      throw new Error("resolveUrl requires at least one argument; got none.")
    ***REMOVED***

    var base = document.createElement("base")
    base.href = arguments[0]

    if (numUrls === 1) ***REMOVED***
      return base.href
    ***REMOVED***

    var head = document.getElementsByTagName("head")[0]
    head.insertBefore(base, head.firstChild)

    var a = document.createElement("a")
    var resolved

    for (var index = 1; index < numUrls; index++) ***REMOVED***
      a.href = arguments[index]
      resolved = a.href
      base.href = resolved
    ***REMOVED***

    head.removeChild(base)

    return resolved
  ***REMOVED***

  return resolveUrl

***REMOVED***));
