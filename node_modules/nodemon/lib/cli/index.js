var parse = require('./parse');

/**
 * Converts a string to command line args, in particular
 * groups together quoted values.
 * This is a utility function to allow calling nodemon as a required
 * library, but with the CLI args passed in (instead of an object).
 *
 * @param  ***REMOVED***String***REMOVED*** string
 * @return ***REMOVED***Array***REMOVED***
 */
function stringToArgs(string) ***REMOVED***
  var args = [];

  var parts = string.split(' ');
  var length = parts.length;
  var i = 0;
  var open = false;
  var grouped = '';
  var lead = '';

  for (; i < length; i++) ***REMOVED***
    lead = parts[i].substring(0, 1);
    if (lead === '"' || lead === '\'') ***REMOVED***
      open = lead;
      grouped = parts[i].substring(1);
    ***REMOVED*** else if (open && parts[i].slice(-1) === open) ***REMOVED***
      open = false;
      grouped += ' ' + parts[i].slice(0, -1);
      args.push(grouped);
    ***REMOVED*** else if (open) ***REMOVED***
      grouped += ' ' + parts[i];
    ***REMOVED*** else ***REMOVED***
      args.push(parts[i]);
    ***REMOVED***
  ***REMOVED***

  return args;
***REMOVED***

module.exports = ***REMOVED***
  parse: function (argv) ***REMOVED***
    if (typeof argv === 'string') ***REMOVED***
      argv = stringToArgs(argv);
    ***REMOVED***

    return parse(argv);
  ***REMOVED***,
***REMOVED***;