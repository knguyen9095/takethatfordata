'use strict';

var assign        = require('es5-ext/object/assign')
  , normalizeOpts = require('es5-ext/object/normalize-options')
  , isCallable    = require('es5-ext/object/is-callable')
  , contains      = require('es5-ext/string/#/contains')

  , d;

d = module.exports = function (dscr, value/*, options*/) ***REMOVED***
	var c, e, w, options, desc;
	if ((arguments.length < 2) || (typeof dscr !== 'string')) ***REMOVED***
		options = value;
		value = dscr;
		dscr = null;
	***REMOVED*** else ***REMOVED***
		options = arguments[2];
	***REMOVED***
	if (dscr == null) ***REMOVED***
		c = w = true;
		e = false;
	***REMOVED*** else ***REMOVED***
		c = contains.call(dscr, 'c');
		e = contains.call(dscr, 'e');
		w = contains.call(dscr, 'w');
	***REMOVED***

	desc = ***REMOVED*** value: value, configurable: c, enumerable: e, writable: w ***REMOVED***;
	return !options ? desc : assign(normalizeOpts(options), desc);
***REMOVED***;

d.gs = function (dscr, get, set/*, options*/) ***REMOVED***
	var c, e, options, desc;
	if (typeof dscr !== 'string') ***REMOVED***
		options = set;
		set = get;
		get = dscr;
		dscr = null;
	***REMOVED*** else ***REMOVED***
		options = arguments[3];
	***REMOVED***
	if (get == null) ***REMOVED***
		get = undefined;
	***REMOVED*** else if (!isCallable(get)) ***REMOVED***
		options = get;
		get = set = undefined;
	***REMOVED*** else if (set == null) ***REMOVED***
		set = undefined;
	***REMOVED*** else if (!isCallable(set)) ***REMOVED***
		options = set;
		set = undefined;
	***REMOVED***
	if (dscr == null) ***REMOVED***
		c = true;
		e = false;
	***REMOVED*** else ***REMOVED***
		c = contains.call(dscr, 'c');
		e = contains.call(dscr, 'e');
	***REMOVED***

	desc = ***REMOVED*** get: get, set: set, configurable: c, enumerable: e ***REMOVED***;
	return !options ? desc : assign(normalizeOpts(options), desc);
***REMOVED***;
