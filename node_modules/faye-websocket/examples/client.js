var WebSocket = require('..').Client,
    deflate   = require('permessage-deflate'),
    fs        = require('fs');

var url   = process.argv[2],
    proxy = process.argv[3],
    ca    = fs.readFileSync(__dirname + '/../spec/server.crt'),
    tls   = ***REMOVED***ca: ca***REMOVED***;

var ws = new WebSocket(url, [], ***REMOVED***
  proxy:      ***REMOVED***origin: proxy, headers: ***REMOVED***'User-Agent': 'Echo'***REMOVED***, tls: tls***REMOVED***,
  tls:        tls,
  headers:    ***REMOVED***Origin: 'http://faye.jcoglan.com'***REMOVED***,
  extensions: [deflate]
***REMOVED***);

ws.onopen = function() ***REMOVED***
  console.log('[open]', ws.headers);
  ws.send('mic check');
***REMOVED***;

ws.onclose = function(close) ***REMOVED***
  console.log('[close]', close.code, close.reason);
***REMOVED***;

ws.onerror = function(error) ***REMOVED***
  console.log('[error]', error.message);
***REMOVED***;

ws.onmessage = function(message) ***REMOVED***
  console.log('[message]', message.data);
***REMOVED***;
