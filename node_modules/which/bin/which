#!/usr/bin/env node
var which = require("../")
if (process.argv.length < 3)
  usage()

function usage () ***REMOVED***
  console.error('usage: which [-as] program ...')
  process.exit(1)
***REMOVED***

var all = false
var silent = false
var dashdash = false
var args = process.argv.slice(2).filter(function (arg) ***REMOVED***
  if (dashdash || !/^-/.test(arg))
    return true

  if (arg === '--') ***REMOVED***
    dashdash = true
    return false
  ***REMOVED***

  var flags = arg.substr(1).split('')
  for (var f = 0; f < flags.length; f++) ***REMOVED***
    var flag = flags[f]
    switch (flag) ***REMOVED***
      case 's':
        silent = true
        break
      case 'a':
        all = true
        break
      default:
        console.error('which: illegal option -- ' + flag)
        usage()
    ***REMOVED***
  ***REMOVED***
  return false
***REMOVED***)

process.exit(args.reduce(function (pv, current) ***REMOVED***
  try ***REMOVED***
    var f = which.sync(current, ***REMOVED*** all: all ***REMOVED***)
    if (all)
      f = f.join('\n')
    if (!silent)
      console.log(f)
    return pv;
  ***REMOVED*** catch (e) ***REMOVED***
    return 1;
  ***REMOVED***
***REMOVED***, 0))
