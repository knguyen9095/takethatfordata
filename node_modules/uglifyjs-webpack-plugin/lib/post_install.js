/* eslint-disable */
// adapted based on rackt/history (MIT)
// Node 0.10+
var execSync = require('child_process').execSync;
var fs = require('fs');

// Node 0.10 check
if (!execSync) ***REMOVED***
  execSync = require('sync-exec');
***REMOVED***

function exec(command) ***REMOVED***
  execSync(command, ***REMOVED***
    stdio: [0, 1, 2]
  ***REMOVED***);
***REMOVED***

fs.stat('dist', function(error, stat) ***REMOVED***
  // Skip building on Travis
  if (process.env.TRAVIS) ***REMOVED***
    return;
  ***REMOVED***

  if (error || !stat.isDirectory()) ***REMOVED***
    // Create a directory to avoid getting stuck
    // in postinstall loop
    fs.mkdirSync('dist');
    exec('npm install --only=dev');
    exec('npm run build');
  ***REMOVED***
***REMOVED***);
