'use strict';

var Buffer = require('buffer').Buffer;
/*<replacement>*/
var bufferShim = require('buffer-shims');
/*</replacement>*/

module.exports = BufferList;

function BufferList() ***REMOVED***
  this.head = null;
  this.tail = null;
  this.length = 0;
***REMOVED***

BufferList.prototype.push = function (v) ***REMOVED***
  var entry = ***REMOVED*** data: v, next: null ***REMOVED***;
  if (this.length > 0) this.tail.next = entry;else this.head = entry;
  this.tail = entry;
  ++this.length;
***REMOVED***;

BufferList.prototype.unshift = function (v) ***REMOVED***
  var entry = ***REMOVED*** data: v, next: this.head ***REMOVED***;
  if (this.length === 0) this.tail = entry;
  this.head = entry;
  ++this.length;
***REMOVED***;

BufferList.prototype.shift = function () ***REMOVED***
  if (this.length === 0) return;
  var ret = this.head.data;
  if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;
  --this.length;
  return ret;
***REMOVED***;

BufferList.prototype.clear = function () ***REMOVED***
  this.head = this.tail = null;
  this.length = 0;
***REMOVED***;

BufferList.prototype.join = function (s) ***REMOVED***
  if (this.length === 0) return '';
  var p = this.head;
  var ret = '' + p.data;
  while (p = p.next) ***REMOVED***
    ret += s + p.data;
  ***REMOVED***return ret;
***REMOVED***;

BufferList.prototype.concat = function (n) ***REMOVED***
  if (this.length === 0) return bufferShim.alloc(0);
  if (this.length === 1) return this.head.data;
  var ret = bufferShim.allocUnsafe(n >>> 0);
  var p = this.head;
  var i = 0;
  while (p) ***REMOVED***
    p.data.copy(ret, i);
    i += p.data.length;
    p = p.next;
  ***REMOVED***
  return ret;
***REMOVED***;