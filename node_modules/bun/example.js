#!/usr/bin/env node
var  stream = require("readable-stream"),
     bun    = require("./lib/bun");

// stream generator
var createStream = function createStream(id) ***REMOVED***
  var s = new stream.Transform(***REMOVED***encoding: "utf8"***REMOVED***);
  s._transform = function _transform(str, encoding, done) ***REMOVED***
    this.push("(" + id + " " + str + ")");
    done();
  ***REMOVED***;
  return s;
***REMOVED***;

// create some streams
var streams = ["G", "O", "D"].map(function(id) ***REMOVED***
  return createStream(id);
***REMOVED***);

// wrap the streams in a bun!
var hotdog = bun(streams);

// connect hotdog to stdout
hotdog.pipe(process.stdout);

// use the hotdog
hotdog.write("in a bun"); // (D (O (G in a bun)))
