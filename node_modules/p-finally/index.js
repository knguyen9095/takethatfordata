'use strict';
module.exports = (promise, onFinally) => ***REMOVED***
	onFinally = onFinally || (() => ***REMOVED******REMOVED***);

	return promise.then(
		val => new Promise(resolve => ***REMOVED***
			resolve(onFinally());
		***REMOVED***).then(() => val),
		err => new Promise(resolve => ***REMOVED***
			resolve(onFinally());
		***REMOVED***).then(() => ***REMOVED***
			throw err;
		***REMOVED***)
	);
***REMOVED***;
