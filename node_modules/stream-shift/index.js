module.exports = shift

function shift (stream) ***REMOVED***
  var rs = stream._readableState
  if (!rs) return null
  return rs.objectMode ? stream.read() : stream.read(getStateLength(rs))
***REMOVED***

function getStateLength (state) ***REMOVED***
  if (state.buffer.length) ***REMOVED***
    // Since node 6.3.0 state.buffer is a BufferList not an array
    if (state.buffer.head) ***REMOVED***
      return state.buffer.head.data.length
    ***REMOVED***

    return state.buffer[0].length
  ***REMOVED***

  return state.length
***REMOVED***
