var tape = require('tape')
var through = require('through2')
var stream = require('stream')
var shift = require('./')

tape('shifts next', function (t) ***REMOVED***
  var passthrough = through()

  passthrough.write('hello')
  passthrough.write('world')

  t.same(shift(passthrough), Buffer('hello'))
  t.same(shift(passthrough), Buffer('world'))
  t.end()
***REMOVED***)

tape('shifts next with core', function (t) ***REMOVED***
  var passthrough = stream.PassThrough()

  passthrough.write('hello')
  passthrough.write('world')

  t.same(shift(passthrough), Buffer('hello'))
  t.same(shift(passthrough), Buffer('world'))
  t.end()
***REMOVED***)

tape('shifts next with object mode', function (t) ***REMOVED***
  var passthrough = through(***REMOVED***objectMode: true***REMOVED***)

  passthrough.write(***REMOVED***hello: 1***REMOVED***)
  passthrough.write(***REMOVED***world: 1***REMOVED***)

  t.same(shift(passthrough), ***REMOVED***hello: 1***REMOVED***)
  t.same(shift(passthrough), ***REMOVED***world: 1***REMOVED***)
  t.end()
***REMOVED***)

tape('shifts next with object mode with core', function (t) ***REMOVED***
  var passthrough = stream.PassThrough(***REMOVED***objectMode: true***REMOVED***)

  passthrough.write(***REMOVED***hello: 1***REMOVED***)
  passthrough.write(***REMOVED***world: 1***REMOVED***)

  t.same(shift(passthrough), ***REMOVED***hello: 1***REMOVED***)
  t.same(shift(passthrough), ***REMOVED***world: 1***REMOVED***)
  t.end()
***REMOVED***)
