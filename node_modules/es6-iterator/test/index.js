"use strict";

var ee             = require("event-emitter")
  , iteratorSymbol = require("es6-symbol").iterator;

module.exports = function (T) ***REMOVED***
	return ***REMOVED***
		"": function (a) ***REMOVED***
			var x = ["raz", "dwa", "trzy", "cztery", "pięć"], it, y, z;

			it = new T(x);
			a(it[iteratorSymbol](), it, "@@iterator");
			y = it.next();
			a.deep(y, ***REMOVED*** done: false, value: "raz" ***REMOVED***, "#1");
			z = it.next();
			a.not(y, z, "Recreate result");
			a.deep(z, ***REMOVED*** done: false, value: "dwa" ***REMOVED***, "#2");
			a.deep(it.next(), ***REMOVED*** done: false, value: "trzy" ***REMOVED***, "#3");
			a.deep(it.next(), ***REMOVED*** done: false, value: "cztery" ***REMOVED***, "#4");
			a.deep(it.next(), ***REMOVED*** done: false, value: "pięć" ***REMOVED***, "#5");
			a.deep(y = it.next(), ***REMOVED*** done: true, value: undefined ***REMOVED***, "End");
			a.not(y, it.next(), "Recreate result on dead");
		***REMOVED***,
		"Emited": function (a) ***REMOVED***
			var x = ["raz", "dwa", "trzy", "cztery", "pięć"], y, it;

			y = ee();
			it = new T(x, y);
			a.deep(it.next(), ***REMOVED*** done: false, value: "raz" ***REMOVED***, "#1");
			a.deep(it.next(), ***REMOVED*** done: false, value: "dwa" ***REMOVED***, "#2");
			y.emit("_add", x.push("sześć") - 1);
			a.deep(it.next(), ***REMOVED*** done: false, value: "trzy" ***REMOVED***, "#3");
			x.splice(1, 0, "półtora");
			y.emit("_add", 1);
			a.deep(it.next(), ***REMOVED*** done: false, value: "półtora" ***REMOVED***, "Insert");
			x.splice(5, 1);
			y.emit("_delete", 5);
			a.deep(it.next(), ***REMOVED*** done: false, value: "cztery" ***REMOVED***, "#4");
			a.deep(it.next(), ***REMOVED*** done: false, value: "sześć" ***REMOVED***, "#5");
			a.deep(it.next(), ***REMOVED*** done: true, value: undefined ***REMOVED***, "End");
		***REMOVED***,
		"Emited #2": function (a) ***REMOVED***
			var x = ["raz", "dwa", "trzy", "cztery", "pięć", "sześć"], y, it;

			y = ee();
			it = new T(x, y);
			a.deep(it.next(), ***REMOVED*** done: false, value: "raz" ***REMOVED***, "#1");
			a.deep(it.next(), ***REMOVED*** done: false, value: "dwa" ***REMOVED***, "#2");
			x.splice(1, 0, "półtora");
			y.emit("_add", 1);
			x.splice(1, 0, "1.25");
			y.emit("_add", 1);
			x.splice(0, 1);
			y.emit("_delete", 0);
			a.deep(it.next(), ***REMOVED*** done: false, value: "półtora" ***REMOVED***, "Insert");
			a.deep(it.next(), ***REMOVED*** done: false, value: "1.25" ***REMOVED***, "Insert #2");
			a.deep(it.next(), ***REMOVED*** done: false, value: "trzy" ***REMOVED***, "#3");
			a.deep(it.next(), ***REMOVED*** done: false, value: "cztery" ***REMOVED***, "#4");
			x.splice(5, 1);
			y.emit("_delete", 5);
			a.deep(it.next(), ***REMOVED*** done: false, value: "sześć" ***REMOVED***, "#5");
			a.deep(it.next(), ***REMOVED*** done: true, value: undefined ***REMOVED***, "End");
		***REMOVED***,
		"Emited: Clear #1": function (a) ***REMOVED***
			var x = ["raz", "dwa", "trzy", "cztery", "pięć", "sześć"], y, it;

			y = ee();
			it = new T(x, y);
			a.deep(it.next(), ***REMOVED*** done: false, value: "raz" ***REMOVED***, "#1");
			a.deep(it.next(), ***REMOVED*** done: false, value: "dwa" ***REMOVED***, "#2");
			x.length = 0;
			y.emit("_clear");
			a.deep(it.next(), ***REMOVED*** done: true, value: undefined ***REMOVED***, "End");
		***REMOVED***,
		"Emited: Clear #2": function (a) ***REMOVED***
			var x = ["raz", "dwa", "trzy", "cztery", "pięć", "sześć"], y, it;

			y = ee();
			it = new T(x, y);
			a.deep(it.next(), ***REMOVED*** done: false, value: "raz" ***REMOVED***, "#1");
			a.deep(it.next(), ***REMOVED*** done: false, value: "dwa" ***REMOVED***, "#2");
			x.length = 0;
			y.emit("_clear");
			x.push("foo");
			x.push("bar");
			a.deep(it.next(), ***REMOVED*** done: false, value: "foo" ***REMOVED***, "#3");
			a.deep(it.next(), ***REMOVED*** done: false, value: "bar" ***REMOVED***, "#4");
			x.splice(1, 0, "półtora");
			y.emit("_add", 1);
			x.splice(1, 0, "1.25");
			y.emit("_add", 1);
			x.splice(0, 1);
			y.emit("_delete", 0);
			a.deep(it.next(), ***REMOVED*** done: false, value: "półtora" ***REMOVED***, "Insert");
			a.deep(it.next(), ***REMOVED*** done: false, value: "1.25" ***REMOVED***, "Insert #2");
			a.deep(it.next(), ***REMOVED*** done: true, value: undefined ***REMOVED***, "End");
		***REMOVED***
	***REMOVED***;
***REMOVED***;
