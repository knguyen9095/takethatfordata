<!DOCTYPE html>
<html>
<body>

<script src="https://www.gstatic.com/firebasejs/4.9.0/firebase.js"></script>
<h1>Make Game</h1>
<form method="get">
  Input Game Data <br>
  Opponent: <input type="text" name="opponent" id="opponent"><br>
  Date: <input type="text" name="date" id="date"><br>
  Location: <input type="text" name="loc" id="loc"><br>
  Result: <span id="result"> </span><br>
  <input type="button" name="submit" value="Submit" onClick="test()">
</form>

<br>

<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyDmi6qgpfnoCZ8a2FM2APfX74dXfiJ9PFY",
    authDomain: "takethatfordata-8f719.firebaseapp.com",
    databaseURL: "https://takethatfordata-8f719.firebaseio.com",
    projectId: "takethatfordata-8f719",
    storageBucket: "takethatfordata-8f719.appspot.com",
    messagingSenderId: "211430446462"
  };
  firebase.initializeApp(config);
  
function test() {
	var d = document.getElementById("date").value;
	var o = document.getElementById("opponent").value;
	var l = document.getElementById("loc").value;
	document.getElementById("result").innerHTML = d+" "+o+" "+l;
	var user = firebase.auth().currentUser;
	if (user) {
	  var db = firebase.database();
	  var ref = db.ref("/users/" + user.uid + "/teams");
	  ref.on("child_added", function (snapshot) {
	    var ss = snapshot.val();
		var key = snapshot.key;
        var reff = db.ref("/users/" + user.uid + "/teams/" + key + "/season_" + ss.active_season + "/games");
		var obj = { "opponent" : o, "date" : d, "location":l};
		reff.push(obj);
	  });
	} else {
	  // No user is signed in.
	  console.log("Error not logged in");
	}
}




</script>
</body>
</html>
